(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={app:0},i=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/admin/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0641":function(e,t,a){"use strict";var r=a("d1f2"),n=a.n(r);n.a},"24eb":function(e,t,a){"use strict";var r=a("e83e"),n=a.n(r);n.a},"3c06":function(e,t,a){},"3d39":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("dac5"),a("6e26"),a("9604"),a("df67");var r=a("6e6d"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"App"}},[a("router-view")],1)},i=[],s={name:"App",components:{}},o=s,l=a("6691"),c=Object(l["a"])(o,n,i,!1,null,null,null),u=c.exports,d=a("c478"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Main"},[a("el-container",{staticStyle:{height:"100vh"}},[a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[a("el-menu",{attrs:{router:"","default-active":e.$route.path,"unique-opened":""}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message"}),e._v("内容管理\n          ")]),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("分类")]),a("el-menu-item",{attrs:{index:"/categories/edit"}},[e._v("新建分类")]),a("el-menu-item",{attrs:{index:"/categories/list"}},[e._v("分类列表")])],2),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("物品")]),a("el-menu-item",{attrs:{index:"/goods/edit"}},[e._v("新建物品")]),a("el-menu-item",{attrs:{index:"/goods/list"}},[e._v("物品列表")])],2),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("英雄")]),a("el-menu-item",{attrs:{index:"/heros/edit"}},[e._v("新建英雄")]),a("el-menu-item",{attrs:{index:"/heros/list"}},[e._v("英雄列表")])],2),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("文章")]),a("el-menu-item",{attrs:{index:"/articles/edit"}},[e._v("新建文章")]),a("el-menu-item",{attrs:{index:"/articles/list"}},[e._v("文章列表")])],2),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("广告位")]),a("el-menu-item",{attrs:{index:"/adverts/edit"}},[e._v("新建广告位")]),a("el-menu-item",{attrs:{index:"/adverts/list"}},[e._v("广告位列表")])],2),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("精彩视频")]),a("el-menu-item",{attrs:{index:"/videos/edit"}},[e._v("新建视频")]),a("el-menu-item",{attrs:{index:"/videos/list"}},[e._v("视频列表")])],2)],2),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message"}),e._v("系统管理\n          ")]),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("管理员管理")]),a("el-menu-item",{attrs:{index:"/adminUsers/edit"}},[e._v("新建管理员")]),a("el-menu-item",{attrs:{index:"/adminUsers/list"}},[e._v("管理员列表")])],2)],2)],1)],1),a("el-container",[a("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[a("el-dropdown",[a("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return t.preventDefault(),e.logout(t)}}},[e._v("注销")])],1)],1),a("span",[e._v(e._s(e.username))])],1),a("el-main",[a("router-view",{key:e.$route.path})],1)],1)],1)],1)},m=[],h={name:"Main",data:function(){return{}},computed:{username:function(){return localStorage.getItem("username")}},methods:{logout:function(){localStorage.setItem("token",""),this.$message({type:"success",message:"已注销"}),this.$router.push("/Login")}}},f=h,g=(a("7919"),Object(l["a"])(f,p,m,!1,null,"268c7300",null)),v=g.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CategoriesList"},[a("h1",[e._v("分类列表")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.categories,stripe:"",fit:""}},[a("el-table-column",{staticStyle:{width:"100px"},attrs:{type:"index",index:e.fnIndex,label:"序号"}}),a("el-table-column",{staticStyle:{width:"220px"},attrs:{prop:"_id",label:"_id"}}),a("el-table-column",{attrs:{prop:"parent.name",label:"父类"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.$router.push("/categories/edit/"+t.row._id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),a("MyPagination",{ref:"pagination",attrs:{changeDatas:e.changeDatas,changeTotal:e.changeTotal,changeCurrPage:e.changeCurrPage,pageSize:e.pageSize,apiName:e.apiName}})],1)},w=[],_=(a("63ff"),a("ad3e")),y=(a("7364"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MyPagination"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize},on:{"current-change":e.currPageChange}})],1)}),x=[],k=(a("d4d5"),{name:"MyPagination",data:function(){return{total:0,currPage:1}},props:{pageSize:{type:Number,required:!0},apiName:{type:String,required:!0},changeDatas:{type:Function,required:!0},changeTotal:{type:Function,required:!0},changeCurrPage:{type:Function,required:!0}},methods:{currPageChange:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/".concat(this.apiName,"?pageSize=").concat(this.pageSize,"&currPage=").concat(t));case 2:a=e.sent,this.changeDatas(a.data.data.result),this.currPage!==t&&(this.currPage=t),this.changeCurrPage(this.currPage);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getheros:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/".concat(this.apiName));case 2:t=e.sent,this.total=t.data.data.result,this.changeTotal(this.total);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getheros(),this.currPageChange(this.currPage)}}),$=k,S=Object(l["a"])($,y,x,!1,null,null,null),C=S.exports,A={name:"CategoriesList",data:function(){return{categories:[],total:0,pageSize:8,currPage:1,apiName:"categories"}},components:{MyPagination:C},methods:{fnIndex:function(e){var t=this.pageSize,a=this.currPage;return 1+(a-1)*t+e},changeDatas:function(e){this.categories=e},changeTotal:function(e){this.total=e},changeCurrPage:function(e){this.currPage=e},del:function(e){var t=this;this.$confirm('是否真的删除："'.concat(e.name,'" '),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(_["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("/categories?_id=".concat(e._id));case 2:t.$refs.pagination.currPageChange(t.currPage);case 3:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},U=A,O=Object(l["a"])(U,b,w,!1,null,"27ece9a9",null),P=O.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CategoriesEdit"},[a("h1",[e._v(e._s(e.$route.params._id?"编辑":"创建")+"分类")]),a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"选择父类"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.category.parent,callback:function(t){e.$set(e.category,"parent",t)},expression:"category.parent"}},e._l(e.parents,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"输入分类名称"},on:{blur:function(t){e.isShowAlert=!0}},model:{value:e.category.name,callback:function(t){e.$set(e.category,"name","string"===typeof t?t.trim():t)},expression:"category.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.formCheckFlag},on:{click:function(t){return t.preventDefault(),e.add(t)}}},[e._v("提交")])],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.formCheckFlag&&e.isShowAlert,expression:"formCheckFlag && isShowAlert"}],attrs:{title:e.alertMsg,type:"error","show-icon":""}})],1)},R=[],z={name:"CategoriesEdit",data:function(){return{category:{_id:"",name:""},parents:[],isShowAlert:!1,alertMsg:""}},props:{_id:String},computed:{formCheckFlag:function(){var e=/^([a-zA-Z]|[\u4E00-\u9FA5]){2,16}$/,t=this.category.name;return!e.test(t)&&(this.alertMsg="分类名必须是2-16位的英文字母及汉字的组合",!0)}},methods:{add:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.category,a=t.name,r=t.parent,n=this._id,n){e.next=8;break}return e.next=5,this.$http.post("/categories",{name:a,parent:r});case 5:this.$router.push("/categories/list"),e.next=11;break;case 8:return e.next=10,this.$http.put("/categories",{_id:n,name:a,parent:r});case 10:this.$router.push("/categories/list");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCategoryById:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.$http.get("/categories?_id=".concat(this._id));case 4:t=e.sent,this.category=t.data.data.result;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getParents:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/categories?all=1");case 2:t=e.sent,this.parents=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getParents(),this._id&&this.getCategoryById()}},E=z,D=Object(l["a"])(E,j,R,!1,null,"4ce8dd73",null),I=D.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"GoodsList"},[a("h1",[e._v("物品列表")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.goods,stripe:"",fit:""}},[a("el-table-column",{staticStyle:{width:"100px"},attrs:{type:"index",index:e.fnIndex,label:"序号"}}),a("el-table-column",{staticStyle:{width:"220px"},attrs:{prop:"_id",label:"_id"}}),a("el-table-column",{attrs:{label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"50px",width:"50px","border-radius":"5px"},attrs:{src:e.row.icon,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.$router.push("/goods/edit/"+t.row._id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),a("MyPagination",{ref:"pagination",attrs:{changeDatas:e.changeDatas,changeTotal:e.changeTotal,changeCurrPage:e.changeCurrPage,pageSize:e.pageSize,apiName:e.apiName}})],1)},T=[],B={name:"GoodsList",data:function(){return{goods:[],total:0,pageSize:8,currPage:1,apiName:"goods"}},components:{MyPagination:C},methods:{fnIndex:function(e){var t=this.pageSize,a=this.currPage;return 1+(a-1)*t+e},changeDatas:function(e){this.goods=e},changeTotal:function(e){this.total=e},changeCurrPage:function(e){this.currPage=e},del:function(e){var t=this;this.$confirm('是否真的删除："'.concat(e.name,'" '),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(_["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("/goods?_id=".concat(e._id));case 2:t.$refs.pagination.currPageChange(t.currPage);case 3:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},L=B,N=Object(l["a"])(L,M,T,!1,null,"a109e914",null),F=N.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"GoodsEdit"},[a("h1",[e._v(e._s(e.$route.params._id?"编辑":"创建")+"物品")]),a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"输入物品名称"},on:{focus:function(t){e.isShowAlert=!1},blur:function(t){e.isShowAlert=!0}},model:{value:e.good.name,callback:function(t){e.$set(e.good,"name","string"===typeof t?t.trim():t)},expression:"good.name"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileUploadAction,"show-file-list":!1,"on-success":e.afterUpload,"on-error":e.errorUpload,headers:e.addHeaders,"before-upload":e.beforeAvatarUpload}},[e.good.icon?a("img",{staticClass:"avatar",attrs:{src:e.good.icon}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.formCheckFlag},on:{click:function(t){return t.preventDefault(),e.add(t)}}},[e._v("提交")])],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.formCheckFlag&&e.isShowAlert,expression:"formCheckFlag && isShowAlert"}],attrs:{title:e.alertMsg,type:"error","show-icon":""}})],1)},V=[],q={name:"GoodsEdit",data:function(){return{good:{_id:"",name:"",icon:""},isShowAlert:!1,alertMsg:""}},props:{_id:String},computed:{formCheckFlag:function(){var e=/^([a-zA-Z]|[\u4E00-\u9FA5]){2,16}$/,t=this.good,a=t.name,r=t.icon;return e.test(a)?!r&&(this.alertMsg="图标不能为空",!0):(this.alertMsg="物品名必须是2-16位的英文字母及汉字的组合",!0)}},methods:{afterUpload:function(e){this.good.icon=e.data.result.imgUrl},add:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.good,a=t.name,r=t.icon,n=this._id,n){e.next=8;break}return e.next=5,this.$http.post("/goods",{name:a,icon:r});case 5:this.$router.push("/goods/list"),e.next=11;break;case 8:return e.next=10,this.$http.put("/goods",{_id:n,name:a,icon:r});case 10:this.$router.push("/goods/list");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getgoodById:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/goods?_id=".concat(this._id));case 2:t=e.sent,this.good=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this._id&&this.getgoodById()}},G=q,Y=(a("24eb"),Object(l["a"])(G,H,V,!1,null,"6aaf5711",null)),Z=Y.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"HerosList"},[a("h1",[e._v("英雄列表")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.heros,stripe:"",fit:""}},[a("el-table-column",{staticStyle:{width:"100px"},attrs:{type:"index",index:e.fnIndex,label:"序号"}}),a("el-table-column",{staticStyle:{width:"220px"},attrs:{prop:"_id",label:"_id"}}),a("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"50px",width:"50px","border-radius":"5px"},attrs:{src:e.row.icon,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.$router.push("/heros/edit/"+t.row._id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),a("MyPagination",{ref:"pagination",attrs:{changeDatas:e.changeDatas,changeTotal:e.changeTotal,changeCurrPage:e.changeCurrPage,pageSize:e.pageSize,apiName:e.apiName}})],1)},K=[],Q={name:"HerosList",data:function(){return{heros:[],total:0,pageSize:8,currPage:1,apiName:"heros"}},components:{MyPagination:C},methods:{fnIndex:function(e){var t=this.pageSize,a=this.currPage;return 1+(a-1)*t+e},changeDatas:function(e){this.heros=e},changeTotal:function(e){this.total=e},changeCurrPage:function(e){this.currPage=e},del:function(e){var t=this;this.$confirm('是否真的删除："'.concat(e.name,'" '),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(_["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("/heros?_id=".concat(e._id));case 2:t.$refs.pagination.currPageChange(t.currPage);case 3:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},W=Q,X=Object(l["a"])(W,J,K,!1,null,"8a56c2a6",null),ee=X.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"HerosEdit"},[a("h1",[e._v(e._s(e.$route.params._id?"编辑":"创建")+"英雄")]),a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基础信息",name:"first"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"输入英雄名称"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileUploadAction,headers:e.addHeaders,"show-file-list":!1,"on-success":function(t){return e.model.icon=t.data.result.imgUrl},"before-upload":e.beforeAvatarUpload}},[e.model.icon?a("img",{staticClass:"avatar",attrs:{src:e.model.icon}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"背景图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileUploadAction,headers:e.addHeaders,"show-file-list":!1,"on-success":function(t){return e.model.bg_img=t.data.result.imgUrl},"before-upload":e.beforeImageUpload}},[e.model.bg_img?a("img",{staticClass:"avatar",attrs:{src:e.model.bg_img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"称号（标签）"}},[a("el-input",{attrs:{placeholder:"输入英雄称号"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("el-form-item",{attrs:{label:"所属分类"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"评分"}},[a("br"),a("div",{staticClass:"score-box"},[a("div",[a("span",[e._v("难度")]),a("el-rate",{attrs:{max:9,"show-score":""},model:{value:e.model.scores.diffcut,callback:function(t){e.$set(e.model.scores,"diffcut",t)},expression:"model.scores.diffcut"}})],1),a("div",[a("span",[e._v("技能")]),a("el-rate",{attrs:{max:9,"show-score":""},model:{value:e.model.scores.technicl,callback:function(t){e.$set(e.model.scores,"technicl",t)},expression:"model.scores.technicl"}})],1),a("div",[a("span",[e._v("攻击")]),a("el-rate",{attrs:{max:9,"show-score":""},model:{value:e.model.scores.attack,callback:function(t){e.$set(e.model.scores,"attack",t)},expression:"model.scores.attack"}})],1),a("div",[a("span",[e._v("生存")]),a("el-rate",{attrs:{max:9,"show-score":""},model:{value:e.model.scores.live,callback:function(t){e.$set(e.model.scores,"live",t)},expression:"model.scores.live"}})],1)])]),a("el-form-item",{attrs:{label:"出装推荐"}},[a("br"),a("div",{staticClass:"goods-box"},[a("div",{staticClass:"good"},[a("span",[e._v("顺风出装")]),a("el-select",{attrs:{multiple:"",placeholder:"请选择装备"},model:{value:e.model.goods.good.items,callback:function(t){e.$set(e.model.goods.good,"items",t)},expression:"model.goods.good.items"}},e._l(e.goods,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1),a("el-input",{attrs:{type:"textarea",placeholder:"输入小提示"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.model.goods.good.tips,callback:function(t){e.$set(e.model.goods.good,"tips",t)},expression:"model.goods.good.tips"}})],1),a("div",{staticClass:"bad"},[a("span",[e._v("逆风出装")]),a("el-select",{attrs:{multiple:"",placeholder:"请选择装备"},model:{value:e.model.goods.bad.items,callback:function(t){e.$set(e.model.goods.bad,"items",t)},expression:"model.goods.bad.items"}},e._l(e.goods,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1),a("el-input",{attrs:{type:"textarea",placeholder:"输入小提示"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.model.goods.bad.tips,callback:function(t){e.$set(e.model.goods.bad,"tips",t)},expression:"model.goods.bad.tips"}})],1)])]),a("el-form-item",{attrs:{label:"使用技巧"}},[a("el-input",{attrs:{type:"textarea",placeholder:"输入英雄使用技巧"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.model.useage_skills,callback:function(t){e.$set(e.model,"useage_skills",t)},expression:"model.useage_skills"}})],1),a("el-form-item",{attrs:{label:"对抗技巧"}},[a("el-input",{attrs:{type:"textarea",placeholder:"输入英雄对抗技巧"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.model.battle_skills,callback:function(t){e.$set(e.model,"battle_skills",t)},expression:"model.battle_skills"}})],1),a("el-form-item",{attrs:{label:"团战技巧"}},[a("el-input",{attrs:{type:"textarea",placeholder:"输入英雄团战技巧"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.model.team_skills,callback:function(t){e.$set(e.model,"team_skills",t)},expression:"model.team_skills"}})],1)],1),a("el-tab-pane",{attrs:{label:"技能管理",name:"second"}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(t){return t.preventDefault(),e.model.skills.push({name:"",icon:"",describs:"",tips:""})}}},[e._v("添加技能")]),a("div",{staticClass:"skills-box"},e._l(e.model.skills,(function(t,r){return a("div",{key:r,staticClass:"item"},[a("el-form-item",{attrs:{label:"招式名称"}},[a("el-input",{attrs:{placeholder:"输入招式名称"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("el-form-item",{attrs:{label:"冷却值"}},[a("el-input",{attrs:{placeholder:"输入冷却值"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:t.cold,callback:function(a){e.$set(t,"cold",a)},expression:"item.cold"}})],1),a("el-form-item",{attrs:{label:"消耗值"}},[a("el-input",{attrs:{placeholder:"输入消耗值"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:t.cost,callback:function(a){e.$set(t,"cost",a)},expression:"item.cost"}})],1),a("el-form-item",{attrs:{label:"招式图标"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileUploadAction,headers:e.addHeaders,"show-file-list":!1,"on-success":function(e){return t.icon=e.data.result.imgUrl},"before-upload":e.beforeAvatarUpload}},[t.icon?a("img",{staticClass:"avatar",attrs:{src:t.icon}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"招式描述"}},[a("el-input",{attrs:{placeholder:"输入招式描述",type:"textarea"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:t.describs,callback:function(a){e.$set(t,"describs",a)},expression:"item.describs"}})],1),a("el-form-item",{attrs:{label:"招式提示"}},[a("el-input",{attrs:{placeholder:"输入招式提示",type:"textarea"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:t.tips,callback:function(a){e.$set(t,"tips",a)},expression:"item.tips"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",plain:""},on:{click:function(t){return t.preventDefault(),e.model.skills.splice(r,1)}}},[e._v("删除")])],1)],1)})),0)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add(t)}}},[e._v("提交")])],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.isShowAlert,expression:"isShowAlert"}],attrs:{title:e.alertMsg,type:"error","show-icon":""}})],1)},ae=[],re="5daaea095dbfe76ec732da4b",ne="5dab45ce9265ba7350670065",ie="5dcd55847bb3082ac67e475f",se="https://demo.wuyongde.com/admin/api",oe={name:"HerosEdit",data:function(){return{activeName:"first",model:{_id:"",name:"",icon:"",title:"",categories:[],scores:{diffcut:0,technicl:0,attack:0,live:0},goods:{good:{tips:"",items:[]},bad:{tips:"",items:[]}},useage_skills:"",battle_skills:"",team_skills:"",partners:[],skills:[],bg_img:""},isShowAlert:!1,alertMsg:"",categories:[],goods:[]}},props:{_id:String},methods:{add:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this._id,t?(this.$http.put("/heros",this.model),this.$router.push("/heros/list")):(this.$http.post("/heros",this.model),this.$router.push("/heros/list"));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getheroById:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/heros?_id=".concat(this._id));case 2:t=e.sent,Object.assign(this.model,t.data.data.result);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCategories:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/categories?parent=".concat(re));case 2:t=e.sent,this.categories=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getGoods:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/goods");case 2:t=e.sent,this.goods=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getCategories(),this.getGoods(),this._id&&this.getheroById()}},le=oe,ce=(a("acfa"),Object(l["a"])(le,te,ae,!1,null,"07ecf4ae",null)),ue=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ArticlesList"},[a("h1",[e._v("文章列表")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.articles,stripe:"",fit:""}},[a("el-table-column",{staticStyle:{width:"100px"},attrs:{type:"index",index:e.fnIndex,label:"序号"}}),a("el-table-column",{staticStyle:{width:"220px"},attrs:{prop:"_id",label:"_id"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"pub_date",label:"发表日期"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.$router.push("/articles/edit/"+t.row._id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),a("MyPagination",{ref:"pagination",attrs:{changeDatas:e.changeDatas,changeTotal:e.changeTotal,changeCurrPage:e.changeCurrPage,pageSize:e.pageSize,apiName:e.apiName}})],1)},pe=[],me={name:"ArticlesList",data:function(){return{articles:[],total:0,pageSize:8,currPage:1,apiName:"articles"}},components:{MyPagination:C},methods:{fnIndex:function(e){var t=this.pageSize,a=this.currPage;return 1+(a-1)*t+e},changeDatas:function(e){this.articles=e},changeTotal:function(e){this.total=e},changeCurrPage:function(e){this.currPage=e},del:function(e){var t=this;this.$confirm('是否真的删除："'.concat(e.title,'" '),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(_["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("/articles?_id=".concat(e._id));case 2:t.$refs.pagination.currPageChange(t.currPage);case 3:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},he=me,fe=Object(l["a"])(he,de,pe,!1,null,"54e7da67",null),ge=fe.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ArticlesEdit"},[a("h1",[e._v(e._s(e.$route.params._id?"编辑":"创建")+"文章")]),a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"输入文章标题"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.article.title,callback:function(t){e.$set(e.article,"title",t)},expression:"article.title"}})],1),a("el-form-item",{attrs:{label:"所属分类"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.article.categories,callback:function(t){e.$set(e.article,"categories",t)},expression:"article.categories"}},e._l(e.categories,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"内容"}},[a("vue-editor",{attrs:{useCustomImageHandler:"",id:"editor"},on:{"image-added":e.handleImageAdded},model:{value:e.article.content,callback:function(t){e.$set(e.article,"content",t)},expression:"article.content"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add(t)}}},[e._v("提交")])],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.isShowAlert,expression:"isShowAlert"}],attrs:{title:e.alertMsg,type:"error","show-icon":""}})],1)},be=[],we=a("7457"),_e={name:"ArticlesEdit",data:function(){return{article:{_id:"",title:"",categories:[],content:""},isShowAlert:!1,alertMsg:"",categories:[]}},props:{_id:String},components:{VueEditor:we["a"]},methods:{add:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.article,a=t.title,r=t.categories,n=t.content,a=a.trim(),i=this._id,i){e.next=9;break}return e.next=6,this.$http.post("/articles",{title:a,categories:r,content:n});case 6:this.$router.push("/articles/list"),e.next=12;break;case 9:return e.next=11,this.$http.put("/articles",{title:a,categories:r,content:n,_id:i});case 11:this.$router.push("/articles/list");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getarticleById:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/articles?_id=".concat(this._id));case 2:t=e.sent,this.article=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCategories:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/categories?parent=".concat(ne));case 2:t=e.sent,this.categories=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleImageAdded:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,a,r,n){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.beforeImageUpload(t)){e.next=2;break}return e.abrupt("return");case 2:return i=new FormData,i.append("file",t),e.next=6,this.$http.post(this.fileUploadAction,i);case 6:s=e.sent,a.insertEmbed(r,"image",s.data.data.result.imgUrl),n();case 9:case"end":return e.stop()}}),e,this)})));function t(t,a,r,n){return e.apply(this,arguments)}return t}()},created:function(){this.getCategories(),this._id&&this.getarticleById()}},ye=_e,xe=(a("0641"),Object(l["a"])(ye,ve,be,!1,null,"561084b6",null)),ke=xe.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AdvertsList"},[a("h1",[e._v("广告位列表")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.adverts,stripe:"",fit:""}},[a("el-table-column",{staticStyle:{width:"220px"},attrs:{prop:"_id",label:"_id"}}),a("el-table-column",{attrs:{prop:"name",label:"广告位名称"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.$router.push("/adverts/edit/"+t.row._id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1)},Se=[],Ce={name:"AdvertsList",data:function(){return{adverts:[]}},methods:{getadverts:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/adverts");case 2:t=e.sent,this.adverts=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),del:function(e){var t=this;this.$confirm('是否真的删除："'.concat(e.name,'" '),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(_["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("/adverts?_id=".concat(e._id));case 2:t.getadverts();case 3:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},created:function(){this.getadverts()}},Ae=Ce,Ue=Object(l["a"])(Ae,$e,Se,!1,null,"4548f7d9",null),Oe=Ue.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AdvertsEdit"},[a("h1",[e._v(e._s(e.$route.params._id?"编辑":"创建")+"广告位")]),a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"输入广告位名称"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.advert.name,callback:function(t){e.$set(e.advert,"name",t)},expression:"advert.name"}})],1),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(t){return t.preventDefault(),e.advert.items.push({img_url:"",link_url:"",title:""})}}},[e._v("添加广告")]),a("div",{staticClass:"skills-box"},e._l(e.advert.items,(function(t,r){return a("div",{key:r,staticClass:"item"},[a("el-form-item",{attrs:{label:"广告标题"}},[a("el-input",{attrs:{placeholder:"输入广告标题"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}})],1),a("el-form-item",{attrs:{label:"广告图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileUploadAction,headers:e.addHeaders,"show-file-list":!1,"on-success":function(e){return t.img_url=e.data.result.imgUrl},"before-upload":e.beforeImageUpload}},[t.img_url?a("img",{staticClass:"avatar",attrs:{src:t.img_url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"广告链接"}},[a("el-input",{attrs:{placeholder:"输入广告链接",type:"text"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:t.link_url,callback:function(a){e.$set(t,"link_url",a)},expression:"item.link_url"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",plain:""},on:{click:function(t){return t.preventDefault(),e.advert.items.splice(r,1)}}},[e._v("删除")])],1)],1)})),0),a("el-form-item",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add(t)}}},[e._v("提交")])],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.isShowAlert,expression:"isShowAlert"}],attrs:{title:e.alertMsg,type:"error","show-icon":""}})],1)},je=[],Re={name:"AdvertsEdit",data:function(){return{advert:{_id:"",name:"",items:[]},isShowAlert:!1,alertMsg:""}},props:{_id:String},methods:{add:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.advert,a=t.name,r=t.items,a=a.trim(),n=this._id,n){e.next=9;break}return e.next=6,this.$http.post("/adverts",{name:a,items:r});case 6:this.$router.push("/adverts/list"),e.next=12;break;case 9:return e.next=11,this.$http.put("/adverts",{_id:n,name:a,items:r});case 11:this.$router.push("/adverts/list");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getadvertById:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/adverts?_id=".concat(this._id));case 2:t=e.sent,this.advert=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this._id&&this.getadvertById()}},ze=Re,Ee=(a("c7b1"),Object(l["a"])(ze,Pe,je,!1,null,"096a5230",null)),De=Ee.exports,Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AdminUsersList"},[a("h1",[e._v("管理员列表")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.adminUsers,stripe:"",fit:""}},[a("el-table-column",{staticStyle:{width:"220px"},attrs:{prop:"_id",label:"_id"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e.showOpt(t.row.username)?[a("el-button",{attrs:{disabled:"admin"===t.row.username||"demo"===t.row.username,type:"primary",size:"small"},on:{click:function(a){return e.$router.push("/adminUsers/edit/"+t.row._id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]:void 0}}],null,!0)})],1)],1)},Me=[],Te={name:"AdminUsersList",data:function(){return{adminUsers:[]}},computed:{},methods:{showOpt:function(e){return"admin"!==e&&"demo"!==e},getAdminUsers:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/adminUsers");case 2:t=e.sent,this.adminUsers=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),del:function(e){var t=this;this.$confirm('是否真的删除："'.concat(e.username,'" '),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(_["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("/adminUsers?_id=".concat(e._id));case 2:a.sent,t.getAdminUsers();case 4:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},created:function(){this.getAdminUsers()}},Be=Te,Le=Object(l["a"])(Be,Ie,Me,!1,null,"0ee67cbd",null),Ne=Le.exports,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AdminUsersEdit"},[a("h1",[e._v(e._s(e.$route.params._id?"编辑":"创建")+"管理员")]),a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"输入管理员名称",clearable:""},on:{blur:function(t){e.isShowAlert=!0}},model:{value:e.adminUser.username,callback:function(t){e.$set(e.adminUser,"username","string"===typeof t?t.trim():t)},expression:"adminUser.username"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{clearable:"","show-password":"",placeholder:"输入管理员密码",type:"password"},on:{blur:function(t){e.isShowAlert=!0}},model:{value:e.adminUser.password,callback:function(t){e.$set(e.adminUser,"password","string"===typeof t?t.trim():t)},expression:"adminUser.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.formCheckFlag},on:{click:function(t){return t.preventDefault(),e.add(t)}}},[e._v("提交")])],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.formCheckFlag&&e.isShowAlert,expression:"formCheckFlag && isShowAlert"}],attrs:{title:e.alertMsg,type:"error","show-icon":""}})],1)},He=[],Ve={name:"AdminUsersEdit",data:function(){return{adminUser:{_id:"",username:"",password:""},alertMsg:"",isShowAlert:!1}},props:{_id:{type:String}},computed:{formCheckFlag:function(){var e=/^[a-zA-Z0-9_-]{3,16}$/,t=/^.*(?=.{6,})(?=.*\d)(?=.*[A-Za-z])(?=.*[!@#$]).*$/,a=this.adminUser,r=a.username,n=a.password;return e.test(r)?!t.test(n)&&(this.alertMsg="密码至少6位，且必须是数字、字母、特殊字符!@#$的组合",!0):(this.alertMsg="用户名必须是3-16位字母、数字、_、-的组合",!0)}},methods:{add:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.adminUser,a=t.username,r=t.password,n=this._id,n){e.next=8;break}return e.next=5,this.$http.post("/adminUsers",{username:a,password:r});case 5:this.$router.push("/adminUsers/list"),e.next=11;break;case 8:return e.next=10,this.$http.put("/adminUsers",{_id:n,username:a,password:r});case 10:this.$router.push("/adminUsers/list");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAdminUserById:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/adminUsers?_id=".concat(this._id));case 2:t=e.sent,this.adminUser=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this._id&&this.getAdminUserById()}},qe=Ve,Ge=(a("585e"),Object(l["a"])(qe,Fe,He,!1,null,"526c8665",null)),Ye=Ge.exports,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Login"},[a("el-container",[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"请输入用户名",autofocus:"",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{placeholder:"请输入密码",type:"password","show-password":"",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("登录")])],1),a("el-form-item",{attrs:{label:"提示："}},[[a("p",[e._v("用户名： demo 密码： demo")])]],2)],1)],1)],1)},Je=[],Ke={name:"Login",data:function(){return{model:{username:"",password:""}}},methods:{login:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.post("/login",this.model);case 3:t=e.sent,localStorage.setItem("token",t.data.data.token),localStorage.setItem("username",t.data.data.username),this.$router.push("/adminUsers/list"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.model.username=this.model.password="";case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()}},Qe=Ke,We=(a("bab8"),Object(l["a"])(Qe,Ze,Je,!1,null,"438c15ec",null)),Xe=We.exports,et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"VideosList"},[a("h1",[e._v("视频列表")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.videos,stripe:"",fit:""}},[a("el-table-column",{staticStyle:{width:"100px"},attrs:{type:"index",index:e.fnIndex,label:"序号"}}),a("el-table-column",{staticStyle:{width:"220px"},attrs:{prop:"_id",label:"_id"}}),a("el-table-column",{attrs:{prop:"category.name",label:"视频分类"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"playSort",label:"播放次数"}}),a("el-table-column",{attrs:{prop:"createdAt",label:"创建时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.$router.push("/videos/edit/"+t.row._id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),a("MyPagination",{ref:"pagination",attrs:{changeDatas:e.changeDatas,changeTotal:e.changeTotal,changeCurrPage:e.changeCurrPage,pageSize:e.pageSize,apiName:e.apiName}})],1)},tt=[],at=a("4fd2"),rt=a.n(at),nt={name:"VideosList",data:function(){return{videos:[],total:0,pageSize:8,currPage:1,apiName:"videos"}},components:{MyPagination:C},watch:{videos:function(){this.videos.map((function(e){e.createdAt=rt()(e.createdAt).format("YYYY-MM-DD")}))}},methods:{fnIndex:function(e){var t=this.pageSize,a=this.currPage;return 1+(a-1)*t+e},changeDatas:function(e){this.videos=e},changeTotal:function(e){this.total=e},changeCurrPage:function(e){this.currPage=e},del:function(e){var t=this;this.$confirm('是否真的删除："'.concat(e.title,'" '),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(_["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("/videos?_id=".concat(e._id));case 2:t.$refs.pagination.currPageChange(t.currPage);case 3:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},it=nt,st=Object(l["a"])(it,et,tt,!1,null,"5454dbcd",null),ot=st.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"VideosEdit"},[a("h1",[e._v(e._s(e.$route.params._id?"编辑":"创建")+"视频")]),a("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"选择视频分类"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.video.category,callback:function(t){e.$set(e.video,"category",t)},expression:"video.category"}},e._l(e.categories,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"视频标题"}},[a("el-input",{attrs:{placeholder:"输入视频标题"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.video.title,callback:function(t){e.$set(e.video,"title",t)},expression:"video.title"}})],1),a("el-form-item",{attrs:{label:"播放次数"}},[a("el-input",{attrs:{placeholder:"输入视频播放次数"},on:{focus:function(t){e.isShowAlert=!1}},model:{value:e.video.playSort,callback:function(t){e.$set(e.video,"playSort",t)},expression:"video.playSort"}})],1),a("el-form-item",{attrs:{label:"上传日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择上传日期"},model:{value:e.video.createdAt,callback:function(t){e.$set(e.video,"createdAt",t)},expression:"video.createdAt"}})],1),a("el-form-item",{attrs:{label:"封面图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileUploadAction,"show-file-list":!1,"on-success":e.afterUploadImg,"on-error":e.errorUpload,headers:e.addHeaders,"before-upload":e.beforeImageUpload}},[e.video.imgUrl?a("img",{staticClass:"avatar",attrs:{src:e.video.imgUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"视频"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileUploadAction,"show-file-list":!1,"on-success":e.afterUploadVideo,"on-error":e.errorUpload,headers:e.addHeaders,"before-upload":e.beforeVideoUpload}},[e.video.url?a("video",{ref:"videoObj",staticClass:"avatar",attrs:{controls:""}},[a("source",{attrs:{src:e.video.url,type:"video/mp4"}}),a("source",{attrs:{src:e.video.url,type:"video/ogg"}}),e._v("您的浏览器不支持Video标签。\n        ")]):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add(t)}}},[e._v("提交")])],1)],1),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.isShowAlert,expression:"isShowAlert"}],attrs:{title:e.alertMsg,type:"error","show-icon":""}})],1)},ct=[],ut={name:"VideosEdit",data:function(){return{video:{_id:"",title:"",url:"",imgUrl:"",category:"",playSort:0,createdAt:new Date},isShowAlert:!1,alertMsg:"",categories:[]}},props:{_id:String},methods:{afterUploadImg:function(e){this.$set(this.video,"imgUrl",e.data.result.imgUrl)},afterUploadVideo:function(e){this.$set(this.video,"url",e.data.result.imgUrl),this.$refs.videoObj.load()},add:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.video,a=t.title,r=t.url,n=t.imgUrl,i=t.category,a=a.trim(),s=this._id,s){e.next=9;break}return e.next=6,this.$http.post("/videos",{title:a,url:r,imgUrl:n,category:i});case 6:this.$router.push("/videos/list"),e.next=12;break;case 9:return e.next=11,this.$http.put("/videos",{_id:s,title:a,url:r,imgUrl:n,category:i});case 11:this.$router.push("/videos/list");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getvideoById:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/videos?_id=".concat(this._id));case 2:t=e.sent,this.video=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getVideoCategories:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/categories?parent=".concat(ie));case 2:t=e.sent,this.categories=t.data.data.result;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this._id&&this.getvideoById(),this.getVideoCategories()}},dt=ut,pt=(a("59db"),Object(l["a"])(dt,lt,ct,!1,null,"f73569f2",null)),mt=pt.exports;r["default"].use(d["a"]);var ht=new d["a"]({mode:"hash",base:"/admin/",routes:[{path:"/Login",name:"Login",component:Xe,meta:{isPublic:!0}},{path:"/",redirect:"/main"},{path:"/main",name:"main",component:v,children:[{path:"/categories/edit",name:"categoriesAdd",component:I},{path:"/categories/edit/:_id",name:"categoriesEdit",component:I,props:!0},{path:"/categories/list",name:"categoriesList",component:P},{path:"/goods/edit",name:"goodsAdd",component:Z},{path:"/goods/edit/:_id",name:"goodsEdit",component:Z,props:!0},{path:"/goods/list",name:"goodsList",component:F},{path:"/heros/edit",name:"herosAdd",component:ue},{path:"/heros/edit/:_id",name:"herosEdit",component:ue,props:!0},{path:"/heros/list",name:"herosList",component:ee},{path:"/articles/edit",name:"articlesAdd",component:ke},{path:"/articles/edit/:_id",name:"articlesEdit",component:ke,props:!0},{path:"/articles/list",name:"articlesList",component:ge},{path:"/adverts/edit",name:"advertsAdd",component:De},{path:"/adverts/edit/:_id",name:"advertsEdit",component:De,props:!0},{path:"/adverts/list",name:"advertsList",component:Oe},{path:"/adminUsers/edit",name:"adminUsersAdd",component:Ye},{path:"/adminUsers/edit/:_id",name:"adminUsersEdit",component:Ye,props:!0},{path:"/adminUsers/list",name:"adminUsersList",component:Ne},{path:"/videos/edit",name:"videosAdd",component:mt},{path:"/videos/edit/:_id",name:"videosEdit",component:mt,props:!0},{path:"/videos/list",name:"videosList",component:ot}]}]}),ft=a("591a");r["default"].use(ft["a"]);var gt=new ft["a"].Store({state:{},mutations:{},actions:{},getters:{}}),vt=a("7893"),bt=a.n(vt);a("610a");r["default"].use(bt.a);a("3d39");var wt=a("2427"),_t=a.n(wt),yt=_t.a.create({baseURL:se,timeout:1e3});ht.beforeEach(function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,a,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t.meta.isPublic){e.next=4;break}r(),e.next=10;break;case 4:if(n=localStorage.getItem("token"),n){e.next=7;break}return e.abrupt("return",r("/Login"));case 7:return e.next=9,yt.post("/tokenVerify");case 9:r();case 10:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()),yt.interceptors.request.use((function(e){if("/login"===e.url)return e;var t=localStorage.getItem("token");return t?(e.headers.Authorization=t,e):ht.push("/Login")}),(function(e){return Promise.reject(e)})),yt.interceptors.response.use((function(e){return e.data.msg&&r["default"].prototype.$message({type:"success",message:e.data.msg}),204===e.status&&r["default"].prototype.$message({type:"success",message:"删除成功"}),Promise.resolve(e)}),(function(e){return r["default"].prototype.$message({type:"error",message:e.response.data.err}),401===e.response.status&&ht.push("/Login"),Promise.reject(e)}));var xt=yt;r["default"].prototype.$http=xt,r["default"].config.productionTip=!1,r["default"].mixin({computed:{fileUploadAction:function(){return xt.defaults.baseURL+"/uploads"},addHeaders:function(){return{Authorization:localStorage.getItem("token")}}},methods:{beforeAvatarUpload:function(e){var t=/^image\/(jpeg|jpg|png)$/i.test(e.type),a=e.size/1024<100;return t||this.$message.error("上传头像或图标只能是 jpeg|jpg|png 格式!"),a||this.$message.error("上传头像或图标大小不能超过 100KB!"),t&&a},beforeImageUpload:function(e){var t=/^image\/(jpeg|jpg|png)$/i.test(e.type),a=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 jpeg|jpg|png 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a},beforeVideoUpload:function(e){var t=/^video\/mp4$/i.test(e.type),a=e.size/1024/1024<20;return t||this.$message.error("上传视频只能是 mp4 格式!"),a||this.$message.error("上传视频大小不能超过 20MB!"),t&&a},errorUpload:function(e){this.$message({type:"error",message:"文件上传失败，请重新上传 (错误代码：".concat(e.status,")")})}}}),new r["default"]({router:ht,store:gt,render:function(e){return e(u)}}).$mount("#app")},"585e":function(e,t,a){"use strict";var r=a("ec7d"),n=a.n(r);n.a},"59db":function(e,t,a){"use strict";var r=a("dab2"),n=a.n(r);n.a},"5e5c":function(e,t,a){},7919:function(e,t,a){"use strict";var r=a("fb0d"),n=a.n(r);n.a},acfa:function(e,t,a){"use strict";var r=a("5e5c"),n=a.n(r);n.a},bab8:function(e,t,a){"use strict";var r=a("ec16"),n=a.n(r);n.a},c7b1:function(e,t,a){"use strict";var r=a("3c06"),n=a.n(r);n.a},d1f2:function(e,t,a){},dab2:function(e,t,a){},e83e:function(e,t,a){},ec16:function(e,t,a){},ec7d:function(e,t,a){},fb0d:function(e,t,a){}});
//# sourceMappingURL=app.67eb8817.js.map